<!DOCTYPE html>
<html>
<head>
	<title>
		application run
	</title>
<style type="text/css">
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
     
    margin-top: 50px;
  

  }

  td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
  }

  tr:nth-child(even) {
    background-color: #2196f3a6;   
  }
  .search {
    margin-right: 50px;
    float: right;
  }
  #wrap {
    margin:100px;
  }
  #pagination {
    float: right;
    margin-right: 50px;
  }
  h1{
    padding-left: 50px;
    background-color:#f29e84;
    padding-bottom:50px;
    padding-top:50px;
    color:white;
  }

  /* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
}

/* The Close Button */
.close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}


</style>
  <style src="style.css"></style>
	<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
</head>
<body>

  <body>
<head>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


</head>
  <body>
<head>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


</head>
<head>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


</head>
  <body>
<container id="wrap">
  <div id="words">
    <h1 > Product Management</h1>
  </div>

<div class="search">
<input type="search" placeholder="search" id="tim" value="" >
<button onclick="timKiem()"> Search </button>
<button onclick="add()"> Create New</button>
</div>
</br>
    
<table class="table" id="bang" >
  <tr>
    <th>No <button onclick="toggleNumber()">sort</button></th>
    <th>Name </th>
    <th>Details </th>
    <th>Action </th>
  </tr>
  <tr class="row">
    <td class="no"></td>
    <td class="name"></td>
    <td class="info"></td>
    <td class="deleteButton editButton"></td>
  </tr>
   <tr class="row">
    <td class="no"></td>
    <td class="name"></td>
    <td class="info"></td>
    <td class="deleteButton editButton"></td>
  </tr>
   <tr class="row">
    <td class="no"></td>
    <td class="name"></td>
    <td class="info"></td>
    <td class="deleteButton editButton"> </td>
  </tr>
   <tr class="row">
    <td class="no"></td>
    <td class="name"></td>
    <td class="info"></td>
    <td class="deleteButton editButton"> </td>
  </tr>

  
  
  
  
  
</table>
<div id="pagination">
  <a href="javascript:prevPage()" id="prev">Prev</a>
  <a href="javascript:nextPage()" id="next">Next</a>
  <span> page: </span> <span id="page"></span>
</div>
    
<div>
  <span>
    
  </span>
</div>
    <div id="myModal" class="modal">

  <div class="modal-content">
    <span class="close">&times;</span>
    <p id="outputText"></p>
  </div>

</div>

    
    
</container>
</body>






<script type="text/javascript">
	

var content = [ 
  {
    number: 1,
    name: "Cheese",
    detail: "Swiss"
  },
  {
    number: 2,
    name: "Bread",
    detail: "Germany"
  },
  {
    number: 3,
    name: "Apple",
    detail: "USA"
  },
  {
    number: 4,
    name: "Rice",
    detail: "China"
  },
    {
    number: 5,
    name: "Dog meat",
    detail: "Viet"
  },
  {
    number: 6,
    name: "Orange",
    detail: "Libia"
  },
  {
    number: 7,
    name: "Wurst",
    detail: "Germany"
  },
  {
    number: 8,
    name: "Grapes",
    detail: "Laos"
  },
  {
    number: 9,
    name: "Grains",
    detail: "Korea"
  },
    {
    number: 10,
    name: "Cats",
    detail: "Thais"
      
  },
  {
    number: 11,
    name: "Laptops",
    detail: "Sweden"
  },
  {
    number: 12,
    name: "Plans",
    detail: "Australia"
  },
  {
    number: 13,
    name: "Screws",
    detail: "USA"
  },
  {
    number: 14,
    name: "Glass",
    detail: "Sudan"
  },
    {
    number: 15,
    name: "Banana",
    detail: "Mongo"
  },
  {
    number: 16,
    name: "Pusheen",
    detail: "Asia"
  },
  {
    number: 17,
    name: "Hammer",
    detail: "USA"
  },
  {
    number: 18,
    name: "jewels",
    detail: "Africa"
  },
    {
    number: 19,
    name: "cows",
    detail: "Arghentina"
  },
  {
    number: 20,
    name: "soy",
    detail: "Pakistan"
  }
    
] 


var current_page = 1;
// page hien tai
var pageRecord = 4;
// page dieu chinh theo so dong
function numPages()
{      
    var n = Math.ceil(content.length / pageRecord);
    return n;
}
function prevPage()
{
    if (current_page > 1) 
    {
        current_page--;
        changePage(current_page);
    }
}

function nextPage()
{
    if (current_page < numPages()) 
    {
        current_page++;
        changePage(current_page);
    }
  }

function changePage(page)
{
    var col = document.getElementsByClassName("no");
    var colName = document.getElementsByClassName("name");
    var colDetail = document.getElementsByClassName("info");
    var page_span = document.getElementById("page");

    if (page < 1) page = 1;
    if (page > numPages()) page = numPages();
  
for (var i = 0; i < pageRecord; i++)
  {
      col[i].innerText = content[i + (page-1) * pageRecord].number;
      colName[i].innerText = content[i + (page-1) * pageRecord].name;
      colDetail[i].innerText = content[i + (page-1) * pageRecord].detail;
      page_span.innerHTML = page;
  }
}
  


window.onload = function() {
    changePage(1);
};
//already print document ao on the table so wao
// need checking the add()
// checked




// delete button creating
var myNodelist = document.getElementsByClassName("deleteButton");

for ( var i = 0; i < myNodelist.length; i++) 
{
  var button = document.createElement("button");
  var text = document.createTextNode("Delete");
  button.appendChild(text);
  button.className = "delete";
  myNodelist[i].appendChild(button);
}

// delete button deleting
var xoa = document.getElementsByClassName("delete");
for( var i = 0; i< xoa.length;i++)
{
  xoa[i].onclick = function()
  {
    var nothing = this.parentElement.parentElement.style.display = "none";
  }
}

// creating edit button
  var bigDick = document.getElementsByClassName("editButton");
  for( var i =0; i< bigDick.length;i++)
  {
    var nutEdit = document.createElement("button");
    var editText = document.createTextNode("Edit");
    nutEdit.appendChild(editText);
    nutEdit.className="editing";
    bigDick[i].appendChild(nutEdit);
  }

  // edit button editing

  var sua = document.getElementsByClassName("editing");
  for( var i = 0; i < sua.length; i++)
  {
    sua[i].onclick = function()
    {
      var nothingMore = this.parentElement.parentElement.setAttribute("contenteditable","true")
    }
  }

// create new 
  function add() 
{
    var table = document.getElementById("bang");
    var row = table.insertRow(5);
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
    var cell4 = row.insertCell(3);
  // creating button
  var button = document.createElement("button");
  var text = document.createTextNode("Delete");
  button.appendChild(text);
  button.className = "delete";
  cell4.appendChild(button);
  // creating button
  var button1 = document.createElement("button");
  var text1 = document.createTextNode("Edit");
  button1.appendChild(text1);
  button1.className = "editing";
  cell4.appendChild(button1);
  
  var xoa = document.getElementsByClassName("delete");
  for( var i = 0; i< xoa.length;i++)
  {
  xoa[i].onclick = function()
    {
    var nothing = this.parentElement.parentElement.style.display = "none";
    }
  }
  
  var sua = document.getElementsByClassName("editing");
  for( var i = 0; i < sua.length; i++)
  {
    sua[i].onclick = function()
    {
      var nothingMore =this.parentElement.parentElement.setAttribute("contenteditable","true")
    }
  }
   
}

// Search


var ketqua =[]


function toObject(arr) 
{
  var rv = {};
  for (var i = 0; i < arr.length; ++i)
    rv[i] = arr[i];
  return rv;
}
var newArray = toObject(content);
// console.log(newArray)

function timKiem()
{
  var thuTim;
  var a = document.getElementById("tim");
  var thuTim = a.value;
  console.log(thuTim);
  searchObj (newArray, thuTim)
}

function searchObj (newArray, thuTim) 
{
    for (var i in newArray) 
    {
        var value = newArray[i];
        // console.log(value);
        if (typeof value === 'object') 
        {
            searchObj(value, thuTim); 
        }
        if (value === thuTim) 
        {
            
            run();
            document.getElementById("outputText").innerHTML = "Tên là " + newArray.name + ", STT "+   newArray.number +", chi tiết : "+newArray.detail;
          
          
            ketqua.push(newArray);
            console.log(ketqua);
        }
         
        
    }
}


// Sort number
  var emptyNumber = [];
  var emptyNumber2 =[]; 
   var temp =[];

  for( var i = 0; i < content.length; i++)
    {
    emptyNumber.push(content[i].number);
    }


  function sortNumber(array)
    {
    var temp = 0;
  for(a=0;a<array.length;a++){
    for(b=a+1;b<array.length;b++){
      if (array[a] < array[b]){
        temp = array[a];
        array[a] = array[b];
        array[b] = temp;
        }
      }
    }
  return array; 
  }
var newOne = emptyNumber;

var emptyNumber2 = sortNumber(emptyNumber);


 for( var i = 0; i < content.length; i++)
    {
    temp.push(content[i].number);
    }

function toggleNumber() 
{
  for ( var i =0; i< content.length; i++)
  {
    if( content[i].number === temp[i] )
    {
      var cunt = document.getElementsByClassName("no"); 
      cunt[i].innerHTML = emptyNumber2[i];
    }
    else if( content[i].number === emptyNumber2[i] )
    {
      var cunt = document.getElementsByClassName("no"); 
      cunt[i].innerHTML = emptyNumber2[i];
    }
  }
}

// dropdown modal not from mir

function run()
{
var modal = document.getElementById('myModal');  
 modal.style.display = "block";
  

window.onclick = function(event) 
{
    if (event.target == modal) 
    {
        modal.style.display = "none";
      }
  }
}












</script>
</body>
</html>